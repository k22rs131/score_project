{% extends 'base.html' %}

{% block title %}楽譜一覧{% endblock title %}
{% block h1 %}楽譜一覧{% endblock %}



 
{% block content %}



  <!-- 並び替えフォーム -->
  <form method="get" style="margin-left: auto;">
    <label for="sort">並び替え:</label>
    <select name="sort" id="sort" onchange="this.form.submit()">
      <option value="title" {% if request.GET.sort == "title" %}selected{% endif %}>タイトル昇順</option>
      <option value="-title" {% if request.GET.sort == "-title" %}selected{% endif %}>タイトル降順</option>
      <option value="comp" {% if request.GET.sort == "comp" %}selected{% endif %}>作曲者昇順</option>
      <option value="-comp" {% if request.GET.sort == "-comp" %}selected{% endif %}>作曲者降順</option>
      <option value="arr" {% if request.GET.sort == "arr" %}selected{% endif %}>編曲者昇順</option>
      <option value="-arr" {% if request.GET.sort == "-arr" %}selected{% endif %}>編曲者降順</option>
    </select>

    <!-- 検索条件のhiddenフィールドで保持 -->
    <input type="hidden" name="title" value="{{ request.GET.title }}">
    <input type="hidden" name="comp" value="{{ request.GET.comp }}">
    <input type="hidden" name="arr" value="{{ request.GET.arr }}">
    <input type="hidden" name="category" value="{{ request.GET.category }}">
  </form>

  <!--検索ツール-->
  <div class="col-3">
    <h2>検索ツール</h2>
    <form action="" method="get">
      <input name="query" value="{{ request.GET.query }}" type="text" placeholder="キーワードを入れてください" />
      <button type="submit" class="btn btn-primary">検索する</button>　　<button type="button" class="btn btn-secondary" onclick="window.location.href='{{ request.path }}'">条件リセット</button>
    </form>
  </div>


  <!-- ページネーション -->
  {% include 'score/components/pagination.html' %}
  



<div class="row"><!--レイアウト-->

  <div class="col-9"><!--楽譜一覧-->
  {% for item in object_list %} 
  <div class="card">
    <a href="{% url 'detail-score' item.pk %}" class="card-header" >{{ item.title }}</a>
    <div class="card-body">
      {% if  item.arr == ""  %}
      <h5 class="card-title">作曲者：{{ item.comp }}</h5>
      {% else %}
      <h5 class="card-title">作曲者：{{ item.comp }}　編曲者：{{ item.arr }}</h5>
      {% endif %}

      <h6 class="card-title">{{ item.category }}</h5>
    </div>
  </div>
  {% endfor %}
  </div>
</div>
{% include 'score/components/pagination.html' %}
{% endblock content %}